<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.angelinaBot.dao.AdminMapper">

    <insert id="closeFunction">
        insert into a_group_func_close (group_id, func_name) values (#{groupId}, #{funcName})
    </insert>

    <delete id="openFunction">
        delete from a_group_func_close where group_id=#{groupId} and func_name=#{funcName}
    </delete>

    <select id="canUseFunction" resultType="java.lang.Integer">
        select count(group_id) from a_group_func_close where group_id=#{groupId} and func_name=#{funcName}
    </select>

    <select id="initFunctionTable">
        CREATE TABLE IF NOT EXISTS `a_group_func_close`  (
        `group_id` bigInt(255) NOT NULL,
        `func_name` varchar(6) NOT NULL DEFAULT CURRENT_TIMESTAMP
        );
    </select>

    <select id="getCloseFunction" resultType="java.lang.String">
        select func_name from a_group_func_close where group_id=#{groupId}
    </select>
</mapper>